/* Copyright Copyright 2014 Epic Systems Corporation. */

/*! Copyright (c) Epic Systems Corporation 2011-2012 */
if(typeof WP==="undefined")var WP={};if(typeof WP.Validators==="undefined")WP.Validators={};WP.Validators.currentAlerts={};WP.Validators.alertsHolder=null;WP.Validators.DisplayErrors=function(c,b,g){var a,e,d,f;if(WP.suppressErrors===true||c===" ")c="&nbsp;";if(typeof c==="function"){try{a=c(b)}catch(i){a=""}if(a==="")return}else if(typeof c==="string")a=c;else a=c.innerText||c.textContent;e=g||WP.Validators.alertsHolder;if(!e){a&&alert(a);return}if(!b){WP.Validators.currentAlerts={};if(typeof c==="object"){e.innerHTML="";e.appendChild(c)}else{if(e.innerHTML===a)return;e.innerHTML=a;if(a==="&nbsp;"){var h=e.innerText||e.textContent||"";h.length===0&&$T(e,String.fromCharCode(6))}}return}d=WP.Validators.currentAlerts;if(!a){if(d[b]){e.removeChild(d[b]);delete d[b]}return}if(!d[b]){f=document.createElement("p");f.className="alert";d[b]=f;e.appendChild(f)}if(d[b].innerHTML===a||d[b]===a)return;if(typeof c==="object"){d[b].innerHTML="";d[b].appendChild(c)}else d[b].innerHTML=a};if(typeof WP.Validators.Text==="undefined")WP.Validators.Text={};WP.Validators.Text.MaxLengthAndRequired=function(a,l,e,p,d,j){var h="alertborder",n="@MYCHART@MAXLEN@",g="function",c=true,f="focus",m="fadedtext",k,i,o,b={};if(!a)return;if(typeof a==="string")a=document.getElementById(a);d=d||null;l=l||"";o=l.length>0;e=e||200;b.hideHintTextFun=function(){a.value="";removeClassNames(a,m);WP.Events.removeListener(a,f,b.hideHintTextFun)};b.showHintTextFun=function(){a.value="Enter Text Here";applyClass(a,m);WP.Events.addListener(a,f,b.hideHintTextFun)};if(d){i=WP.Validators.Forms[d];if(typeof i==="undefined"){WP.Validators.Forms[d]=[];i=WP.Validators.Forms[d]}k=i.length}b.isEmpty=WP.Strings.isEmpty;b.scrollPreventer=function(){var d=a.scrollTop,e=a.scrollHeight,f=d+a.height===a.scrollHeight;b.valueChecker();if(a.scrollTop!==d)a.scrollTop=f===c?e:d;typeof j===g&&j()};b.valueChecker=function(){SetActivity();var j,c,f,g;j=a.value.length;c={};c[n]=e;if(j>e){c["@MYCHART@OVERLIMIT@"]=j-e;g=decodeMnemonics("@MYCHART@OVERLIMIT@ too many characters.",c);f=createAlert(g,false)}else{c["@MYCHART@REMAININGCHARACTERS@"]=Math.max(0,e-j)+"";f=decodeMnemonics("@MYCHART@REMAININGCHARACTERS@ of @MYCHART@MAXLEN@ characters left.",c);g=b.isEmpty(a.value)&&o?l:" ";removeClassNames(a,h)}if(f.length===0)f="&nbsp;";WP.Validators.DisplayErrors(f,"",p);if(d)i[k]=g};b.focusFun=function(){removeClassNames(a,h);WP.Events.removeListener(a,f,b.focusFun)};b.blurFun=function(){var m;if(b.isEmpty(a.value)){a.value.length===0&&b.showHintTextFun();if(o){m=c;var s={},r,q,t;s[n]=e;r=decodeMnemonics(l,s);q=createAlert(r,c);WP.suppressErrors===c&&applyClass(q,"clearlabel");WP.Validators.DisplayErrors(q,"",p);if(d)i[k]=r}}else if(a.value.length<=e){removeClassNames(a,h);WP.Validators.DisplayErrors("&nbsp;","",p);if(d)i[k]=" ";typeof j===g&&j()}else m=c;if(m&&WP.suppressErrors!==c){applyClass(a,h);WP.Events.addListener(a,f,b.focusFun)}};b.afterCutPaste=function(){window.setTimeout(b.scrollPreventer,1)};WP.Events.addListener(a,"blur",b.blurFun);WP.Events.addListener(a,"keyup",b.scrollPreventer);WP.Events.addListener(a,"paste",b.afterCutPaste);WP.Events.addListener(a,"cut",b.afterCutPaste);WP.Validators.undoRedo(a);WP.suppressErrors=c;b.scrollPreventer();b.blurFun();WP.suppressErrors=false;a.removeMaxLength=function(){WP.Events.removeListener(a,"blur",b.blurFun);WP.Events.removeListener(a,"keyup",b.scrollPreventer);WP.Events.removeListener(a,"cut",b.afterCutPaste);WP.Events.removeListener(a,"paste",b.afterCutPaste);b.hideHintTextFun();b.focusFun();delete b.blurFun;delete b.scrollPreventer;delete b.valueChecker;delete b.isEmpty;delete b.firstAction;delete b.showHintTextFun;delete b.hideHintTextFun;delete b.focusFun;i[k]="";typeof j===g&&j();typeof a.removeUndoRedo===g&&a.removeUndoRedo()}};if(typeof WP.Validators.undoRedo==="undefined")WP.Validators.undoRedo=function(c){var b=true,d=false;if(!checkIt(navigator.userAgent.toLowerCase(),"msie"))return;var a={undoStack:[c.value],redoStack:[],isDeleting:d,isInserting:d};a.pop=function(a){if(a.length===0)return;var b=a[a.length-1];a.length-=1;return b};a.addUndoFun=function(d){if(c.value==="Enter Text Here")return;if(a.undoStack.length===0||c.value!==a.undoStack[a.undoStack.length-1]){a.undoStack[a.undoStack.length]=c.value;a.undoStack.length>75&&a.undoStack.shift();if(d!==b)a.redoStack=[]}};a.onKeyUp=function(g){var e,f=g||window.event;if(f.ctrlKey===d){a.clearNativeUndo();return}if(f.keyCode===90){if(a.undoStack.length===0)return;a.redoStack[a.redoStack.length]=c.value;e=a.pop(a.undoStack);if(e===c.value)e=a.pop(a.undoStack)||"";c.value=e}else if(f.keyCode===89){if(a.redoStack.length===0)return;e=a.pop(a.redoStack);a.addUndoFun(b);c.value=e}};a.onKeyDown=function(e){var c=e||window.event;if(c.keyCode===8||c.keyCode===46){a.isDeleting=b;if(a.isInserting===b){a.isInserting=d;a.addUndoFun()}}else{a.isInserting=b;if(a.isDeleting===b){a.isDeleting=d;a.addUndoFun()}else if(c.keyCode===32){a.isSpacing!==b&&a.addUndoFun();a.isSpacing=b}else{a.isSpacing===b&&a.addUndoFun();a.isSpacing=d}}};a.clearNativeUndo=function(){var a=document.createElement("div");document.body.appendChild(a);document.body.removeChild(a)};WP.Events.addListener(c,"keyup",a.onKeyUp);WP.Events.addListener(c,"paste",a.addUndoFun);WP.Events.addListener(c,"cut",a.addUndoFun);WP.Events.addListener(c,"keydown",a.onKeyDown);c.removeUndoRedo=function(){WP.Events.removeListener(c,"keyup",a.onKeyUp);WP.Events.removeListener(c,"paste",a.addUndoFun);WP.Events.removeListener(c,"cut",a.addUndoFun);WP.Events.removeListener(c,"keydown",a.onKeyDown);try{delete a.addUndoFun;delete a.onKeyDown;delete a.undoStack;delete a.redoStack;delete a.isDeleting;delete a.isInserting;delete a.pop;delete a.clearNativeUndo}catch(b){}};a.addUndoFun()};if(typeof WP.Validators.Calendar==="undefined")WP.Validators.Calendar={aftertwodays:function(c,b,a){return new Date(c,b,a)-new Date>86399e3},past:function(c,b,a){return new Date(c,b,a)<=new Date},future:function(c,b,a){return new Date(c,b,a+1)>=new Date},range:function(f,e,d){var a,g,h,b,c;b=window.cachedStartDate;c=window.cachedEndDate;a=new Date(f,e,d);return b&&a<b?false:c&&a>c?false:true},any:function(){return true}};if(typeof WP.Validators.Forms==="undefined")WP.Validators.Forms={}