/* Copyright Â© 2016 Epic Systems Corporation. */

if(typeof $$WP.Utilities==="undefined")$$WP.Utilities={};$$WP.Utilities.SetupRadioLabels=function(){var c="id",b='label[for="',a='"]';$('input[type="radio"]').change(function(){var d="selected";$.each($('input[type="radio"][name="'+$(this).attr("name")+a),function(f,e){$(b+$(e).attr(c)+a).removeClass(d)});$(b+$(this).attr(c)+a).addClass(d)}).focus(function(){$(b+$(this).attr(c)+a).addClass("focused")}).blur(function(){$(b+$(this).attr(c)+a).removeClass("focused")});$(".radiolabel").click(function(){})};$$WP.Utilities.SetupRadioLabelsInContainer=function(d,e){var c="id",b='label[for="',a='"]';if(d===null)return;d.find('input[type="radio"]').change(function(){var f="selected";$.each(d.find('input[type="radio"][name="'+$(this).attr("name")+a),function(g,e){d.find(b+$(e).attr(c)+a).removeClass(f)});d.find(b+$(this).attr(c)+a).addClass(f);e!==null&&e(this)}).focus(function(){d.find(b+$(this).attr(c)+a).addClass("focused")}).blur(function(){d.find(b+$(this).attr(c)+a).removeClass("focused")});d.find(".radiolabel").click(function(){})};$$WP.Utilities.SetDropdownContents=function(a,c,e,f){var d="disabled",b;if($$WP.Utilities.IsNullOrEmpty(a)||$$WP.Utilities.IsNullOrEmpty(c))return;if(f)c=$.parseJSON(c);b=[];$.each(c,function(a,c){b.push('<option value="'+a+'">'+c+"</option>")});a.empty();a.html(b.join());if(e&&b.length<2)a.attr(d,true);else a.attr(d,false)};$$WP.Utilities.SmoothScrollToElement=function(a,f,b,d){var e,c;if($$WP.Utilities.IsNullOrEmpty(f))throw"Cannot scroll to an empty target.";if($$WP.Utilities.IsNullOrEmpty(a))throw"Cannot scroll nothingness.";if($$WP.Utilities.IsNullOrEmpty(b))b=400;e=$(f);c=e.offset().top;$(a).animate({scrollTop:c},b,function(){var b="force_redraw";d&&d();$(a).addClass(b);setTimeout(function(){$(a).removeClass(b)},1)})};$$WP.Utilities.IsNullOrEmpty=function(a){return typeof a==="undefined"||a===null||a===""};$$WP.Utilities.AddThrottledListener=function(e,f,b,d,a){var c;if($$WP.Utilities.IsNullOrEmpty(e))throw"Element to bind cannot be empty";if($$WP.Utilities.IsNullOrEmpty(f))throw"You must specificy at least one event to throttle";if(!$.isNumeric(d))d=100;if($$WP.Utilities.IsNullOrEmpty(a)&&$$WP.Utilities.IsNullOrEmpty(b))b="change";if(!$.isFunction(a))a=null;c=false;$(e).bind(f,function(f){if(c)return;c=true;window.setTimeout(function(){!$$WP.Utilities.IsNullOrEmpty(b)&&$(e).trigger(b);!$$WP.Utilities.IsNullOrEmpty(a)&&a(f);c=false},d)})};$$WP.Utilities.AddToggleListener=function(j,b,c,e,d,g,f,k,a,i){var h;if($$WP.Utilities.IsNullOrEmpty(b))throw"Toggle control ID is required.";if($$WP.Utilities.IsNullOrEmpty(c))c="click";if(a!==true&&a!==false)a=true;$$WP.Utilities.GetUniqueJQueryById(j,b).bind(c,function(o){var c="data-toggled",n,l,m;n=$$WP.Utilities.GetUniqueJQueryById(j,b).attr("data-toggle-for");if(!$$WP.Utilities.IsNullOrEmpty(n)){l=$("#"+n);m=l.attr(c);h=$(k);$.each(h,function(b,a){$('[data-toggle-for="'+$(this).attr("id")+'"]').removeClass(e).addClass(d);$(a).attr(c,"false");$(a).removeClass(g).addClass(f)});$$WP.Utilities.SetElementToggled(l,$(this),m!=="true",g,f,e,d);$.isFunction(i)&&i(m==="true",o)}return!a})};$$WP.Utilities.SetElementToggled=function(j,i,h,f,e,d,c){var g="data-toggled",a,b;b=$(j);if(!$$WP.Utilities.IsNullOrEmpty(i))a=$(i);else a=$('[data-toggle-for="'+b.attr("id")+'"]');if(h==="true"||h===true){b.attr(g,"true");b.removeClass(e).addClass(f);a.length>0&&a.removeClass(c).addClass(d)}else{b.attr(g,"false");b.removeClass(f).addClass(e);a.length>0&&a.removeClass(d).addClass(c)}};$$WP.Utilities.ElementHasXOverflow=function(a){return a.offsetWidth<a.scrollWidth};$$WP.Utilities.ElementHasYOverflow=function(d){var a=$("html").height(),b=d.offsetHeight,c=d.scrollHeight;return a>b?b<c:a==b&&a==c?$(window).height()<a:void 0};$$WP.Utilities.ElementHasScrolledToBottom=function(c,b){var g=$(c),e=$("html").height(),f=c.offsetHeight,d=c.scrollHeight,a;if(!$.isNumeric(b))b=.8;a=g;if(e==f&&e==d)a=$(window);return a.scrollTop()+a.innerHeight()>=d*b};$$WP.Utilities.GUIDPrefix=function(a){return a?a+"_":""};$$WP.Utilities.GetUniqueJQueryById=function(a,b){return $("#"+$$WP.Utilities.GUIDPrefix(a)+b)};$$WP.Utilities.GetStringResource=function(d,c,b){var a;if(!c)return"";a=$$WP.Utilities.GetUniqueJQueryById(d,"resources").find('div[data-rsrc-id="'+c+'"]').html();if(!$$WP.Utilities.IsNullOrEmpty(b))a=$$WP.Utilities.ReplaceStringMnemonics(a,b);return a};$$WP.Utilities.ReplaceStringMnemonics=function(a,b){var c;if($$WP.Utilities.IsNullOrEmpty(a))return null;!$$WP.Utilities.IsNullOrEmpty(b)&&$.each(b,function(b,d){c=new RegExp("@MYCHART@"+b+"@","gi");a=a.replace(c,d)});return a};$$WP.Utilities.PopulateComplexTemplate=function(h,f,i,g,j,c){var a,d,e,b;if($$WP.Utilities.IsNullOrEmpty(f))throw"You must supply a template ID";if($$WP.Utilities.IsNullOrEmpty(c))c=0;if($$WP.Utilities.IsNullOrEmpty(g))g={};b=(h?h+"_":"")+f+"_"+c;a=$$WP.Utilities.GetUniqueJQueryById(h,f).clone();if(a.attr("data-template-children-only")==="true")a=a.children();else if(a.attr("data-template-no-id")==="true")a.attr("id","");else a.attr("id",b);b=b+"_";d=$$WP.Utilities.RecurseComplexTemplate(a,g,j,b);if(!$$WP.Utilities.IsNullOrEmpty(i)){e=$(i);e.empty();d.appendTo(e)}return d};$$WP.Utilities.RecurseComplexTemplate=function(a,b,d,g,e,c){var i,h,f;$.each(a,function(A,f){var n="data-template-type",m="data-template-source",l="data-template-group-source",h="data-template-group",r,s,p,v,q,j,u,w,i,y,x,t,k,o,z;f=$(f);a=a;r=f.attr(h);s=f.attr(l);i=f.attr(m);t=f.attr("data-template-id");q=j=u=false;z=(f.attr(n)||"").split(" ");$.each(z,function(c,b){var a=true;switch(b){case"collection":q=a;break;case"object":j=a;break;case"value":u=a;break;case"nullable":w=a;break;case"fill":x=a}});p=!$$WP.Utilities.IsNullOrEmpty(r)&&!$$WP.Utilities.IsNullOrEmpty(s);v=!$$WP.Utilities.IsNullOrEmpty(r)&&q;if((j||u)&&w&&$$WP.Utilities.IsNullOrEmpty(b[i])||x)a=a.not(f.empty().remove());else if((q||j||p)&&!v){if(p){f=f.parent().children('[data-template-group="'+r+'"]');i=s}if($$WP.Utilities.IsNullOrEmpty(i))o=b;else o=b[i];if(j)o=[o];if(!j&&!$$WP.Utilities.IsNullOrEmpty(t))k=0;$.each(o,function(j,c){var b,e;if($.isFunction(d))c=d(i,j,c);if(!$$WP.Utilities.IsNullOrEmpty(c)){b=f.clone();if(p){b.removeAttr(h);b.removeAttr(l)}else{b.removeAttr(n);b.removeAttr(m)}b.insertBefore(f.get(0));e=$$WP.Utilities.RecurseComplexTemplate(b,c,d,g,t,k);if($.isNumeric(k))k=k+1;b.replaceWith(e);a=a.add(e)}});a=a.not(f.empty().remove())}else if($$WP.Utilities.IsNullOrEmpty(f.attr(h)))if(f.children().length>0){y=$$WP.Utilities.RecurseComplexTemplate(f.children(),b,d,g,e,c);f.children().remove();y.appendTo(f);a=a.not(f).add(f)}});i=$$WP.Utilities.SerializeNodes(a);if(typeof b==="string")b={"#Value":b};f=$.isNumeric(c);b["#ID"]=g+(e?e:"")+(e&&f?"_"+c:"");b["#NUM"]=f?c:"";h=$($$WP.Utilities.ReplaceTemplateMnemonics(i,b));$.each(h,function(h,g){var e="data-href-url",d="data-headers",c="data-src-url",b,f,a=$(g);b=a.attr(c);if(!$$WP.Utilities.IsNullOrEmpty(b)){a.attr("src",b);a.removeAttr(c)}f=a.attr(d);if(!$$WP.Utilities.IsNullOrEmpty(f)){a.attr("headers",f);a.removeAttr(d)}b=a.attr(e);if(!$$WP.Utilities.IsNullOrEmpty(b)){a.attr("href",b);a.removeAttr(e)}});return h};$$WP.Utilities.SerializeNodes=function(c){var b,a="";if(typeof XMLSerializer==="function"){b=new XMLSerializer;$.each(c,function(d,c){a=a+(c.outerHTML||b.serializeToString(c))})}else $.each(c,function(c,b){a=a+(b.outerHTML||b.xml)});return a};$$WP.Utilities.ReplaceTemplateMnemonics=function(a,c){var b;if($$WP.Utilities.IsNullOrEmpty(a))return null;!$$WP.Utilities.IsNullOrEmpty(c)&&$.each(c,function(c,d){b=new RegExp("__"+c+"__","gi");a=a.replace(b,d)});return a};$$WP.Utilities.CenterContainerOnPage=function(c){var b,d,a;d=$(window).height();b=$(c);a=$$WP.Utilities.ScrollableBody().scrollTop()+($(window).height()-b.height())/2;if(a<0)a=0;b.css({top:a+"px"})};$$WP.Utilities.isAbsoluteURL=function(b){var a=new RegExp("^(?:[a-z]+:)?//","i");return a.test(b)};$$WP.Utilities.ShowUrlInLightbox=function(d,g,c,f,e){var a,b;a=d.url;if(!a)a=d;if(!a)return;b=$("#lightbox");$.ajax($.extend({url:a,type:"GET",dataType:"html",success:function(a){$$WP.Utilities.ShowLightboxOverlay(null,f,e);b.html(a);b.show(function(){$$WP.Utilities.CenterContainerOnPage(b)});c&&typeof c==="function"&&c()}},g||d.settings))};$$WP.Utilities.ShowContainerAsLightbox=function(a,d,c){var b;$$WP.Utilities.ShowLightboxOverlay(a,d,c);b=$(a);b.show(function(){$$WP.Utilities.CenterContainerOnPage(a)})};$$WP.Utilities.ShowLightboxOverlay=function(d,a,c){var b=$("#lightbox_overlay");b.off("click");b.on({click:function(){$$WP.Utilities.HideLightbox(d,c)}});b.show();a&&typeof a==="function"&&a()};$$WP.Utilities.HideLightbox=function Epic$PatientAccess$Utilities$HideLightbox(b,a){!$$WP.Utilities.IsNullOrEmpty(b)&&$(b).hide();$(".lb_content").hide();$("#lightbox_overlay").hide();a&&typeof a==="function"&&a()};$$WP.Utilities.AjaxifyForm=function Epic$PatientAccess$Utilities$AjaxifyForm(d,c,b,a,e){if(!c)return;c.unbind("submit").bind("submit",function(){var f=this;if(!$$WP.Utilities.ValidateForm(d,c))return false;$.ajax({url:$(f).attr("action"),type:$(f).attr("method"),data:$(f).serialize(),context:$(f),datatype:"json",error:$$WP.Utilities.DisplayAjaxError,statusCode:{404:function(){}},success:function(c){var f="function";if(c.action==="showerrors"){$$WP.Utilities.WriteErrorsToForm(d,$(this),c.errors,c.mnemonics);if(b&&typeof b===f)try{b(c.errors)}catch(i){$$WP.Utilities.ShowUrlInLightbox("Error")}return}$$WP.Utilities.RunCallbackForType(e);if(a&&typeof a===f){var g=true;try{g=a(c)}catch(h){}if(!g)return}if(c.action==="lightbox"&&c.url.length>0){$$WP.Utilities.ShowUrlInLightbox(c);return}if(c.action==="redirect"){window.location.assign(c.url||"/");return}}});return false})};$$WP.Utilities.CallbackTypeEnum={Authenticate:"Authenticate"};$$WP.Utilities.RegisterCallbackForType=function Epic$PatientAccess$Utilities$SetCallbackForType(c,a){var b=$$WP.Utilities.CallbackTypeEnum[c];if(!$$WP.CallbacksForType)$$WP.CallbacksForType={};if(!$$WP.Utilities.IsNullOrEmpty(b)&&a&&typeof a==="function")$$WP.CallbacksForType[b]=a};$$WP.Utilities.RunCallbackForType=function Epic$PatientAccess$Utilities$RunCallbackForType(c){var a,b=$$WP.Utilities.CallbackTypeEnum[c];if(!$$WP.Utilities.IsNullOrEmpty(b)){a=$$WP.CallbacksForType[b];a&&typeof a==="function"&&a()}};$$WP.Utilities.DisplayAjaxError=function Epic$PatientAccess$Utilities$DisplayAjaxError(c,a){alert("An error occurred while processing the request: "+a)};$$WP.Utilities.ValidateForm=function Epic$PatientAccess$Utilities$ValidateForm(f,a){var c="field-validation-valid",b="field-validation-error",e={},d=false;a.find("[data-form-valmsg-for="+a.attr("id")+"]").removeClass(b).addClass(c).empty();a.find("span[data-valmsg-for]").removeClass(b).addClass(c).empty();a.find("input").each(function(){var a=this;if($(a).attr("data-val")==="true"){var b=$(a).attr("data-val-required");if(b&&a.value===""){e[$(a).attr("name")]=b;d=true}else $(a).removeClass("input-validation-error")}});if(d){$$WP.Utilities.WriteErrorsToForm(f,a,e);return false}return true};$$WP.Utilities.WriteErrorsToForm=function Epic$PatientAccess$Utilities$WriteErrorsToForm(l,c,a,k){var i="validation-summary-errors",h="validation-summary-valid",g='div[data-valmsg-summary="true"]',e="field-validation-error",d="field-validation-valid",f,b,j={};a=$$WP.Utilities.MapValidationCodesFromServer(l,a,k);c.find("input").each(function(){var f='span[data-valmsg-for="',b="input-validation-error",g=this,h=$(g).attr("name"),k=$(g).attr("id"),i=a[h];if(j[h]===1)return;if(i){$(g).addClass(b);c.find(f+k+'"]').removeClass(d).addClass(e).html(i);delete a[h];j[h]=1}else{$(g).removeClass(b);c.find(f+k+'"]').removeClass(e).addClass(d).empty()}});b=a.formlevelmsg;if(b){c.find(g).removeClass(h).addClass(i).find("ul").append("li").html(b);delete a.formlevelmsg}else c.find(g).removeClass(i).addClass(h).find("ul").empty();for(f in a)if(a.hasOwnProperty(f)){b=a[f];b&&c.find('span[data-valmsg-for*="'+f+'"]').removeClass(d).addClass(e).html(b)}};$$WP.Utilities.MapValidationCodesFromServer=function Epic$PatientAccess$Utilities$MapValidationCodesFromServer(d,f,c){var a,e,b;e=$$WP.Utilities.GetUniqueJQueryById(d,"resources");a={};$.each(f,function(e,g){var f;if(!$$WP.Utilities.IsNullOrEmpty(c))f=c[e];b=$$WP.Utilities.GetStringResource(d,g,f);if(b)a[e]=b;else a[e]=g});return a};$$WP.Utilities.LogAction=function(d,b,a){var c=$("#logActionUrl").html();$.post(c,{action:b,mnemonicsString:JSON.stringify(a)})};$$WP.Utilities.ScrollableBody=function(){return $(jQuery.browser.webkit?"body":"html")};$$WP.Utilities.ActivateHelp=function(a){$('a[data-lightbox-guid="'+a+'"]').each(function(){$(this).unbind("click").bind("click",function(){$$WP.Utilities.ShowContainerAsLightbox($$WP.Utilities.GetUniqueJQueryById(a,$(this).attr("data-lightbox-id")))})})};$$WP.Utilities.SetupCustomTabbingForFields=function Epic$PatientAccess$Controllers$LoginController$_SetupTabbing(b){var c=null,d,e,f,a;f=b[b.length];for(a=0;a<b.length;a++){d=a>0?b[a-1]:c;e=a<b.length-1?b[a+1]:c;b[a].bind("keydown",{$tabFrom:d,$tabTo:e},$$WP.Utilities._CustomTabbingForField);d!=c&&e!=c&&b[a].attr("tabindex",-1)}};$$WP.Utilities._CustomTabbingForField=function Epic$PatientAccess$Controllers$LoginController$_SetupTabbing(a){var b;if(a.keyCode===9){b=a.shiftKey?a.data.$tabFrom:a.data.$tabTo;if(b!=null){b.focus();a.stopPropagation();a.preventDefault()}}};$$WP.Utilities.SafeToRedirect=function $$WP$Utilities$SafeToRedirect(b,a){var c=new $$WP.Popups.SafeToRedirectPopup({callback:b,PositioningFunction:a})};$$WP.Utilities.TryRedirect=function $$WP$Utilities$TryRedirect(b,a){$$WP.Utilities.SafeToRedirect(function $$WP$Utilities$TryRedirect(a){if(a)window.location=b},a)};$$WP.Utilities.DidNotRedirect=function $$WP$Utilities$DidNotRedirect(){$$WP.Popups.SafeToRedirectPopup.canceledRedirect()};$$WP.Utilities.setActivity=function $$WP$Utilities$setActivity(){activity=1;$$WP.Utilities.activity=1};$$WP.Utilities.getSetSafe=function(a,e,f){var b,c,d,g;if(e.indexOf(".")>-1){c=e.split(".");g=c.length-1;for(d=0;d<g&&a;d++)a=a[c[d]];b=c[g]}else b=e;if(!a||b.length===0)return undefined;if(f!==undefined){a[b]=f;return f}return a[b]};$$WP.Utilities.matchWidth=function Utilities$MatchWidth(b){var a=0;b.each(function(){a=Math.max($(this).width(),a)});b.each(function(){$(this).width(a)})};$$WP.Utilities.copyObject=function Utilities$CopyObject(b){var a=$.isArray(b)?[]:{};a=$$WP.Utilities.mergeObjects(b,a,false,true);return a};$$WP.Utilities.mergeObjects=function Utilities$mergeObjects(c,a,f,e){a=a||($.isArray(c)?[]:{});if(f)a=$$WP.Utilities.copyObject(a);if(!c)return a;var d,b;for(b in c){d=c[b];if(d&&typeof d==="object"&&a[b]!==null&&isNaN(d._componentNumber)&&!d.jquery){a[b]=a[b]||($.isArray(c[b])?[]:{});a[b]=$$WP.Utilities.mergeObjects(c[b],a[b],null,e)}else if(typeof a[b]==="undefined"||e)a[b]=c[b]}return a};$$WP.Utilities.guaranteeExistence=function Utilities$GuaranteeExistence(a,e,d){a=a||$$WP;for(var c=e.split("."),f=c.length-1,b=0;b<f;b++){if(!a[c[b]])a[c[b]]=d||{};a=a[c[b]]}if(!a[c[b]])a[c[b]]=d||{};return a};$$WP.Utilities.runOne={on:function Utilities$runOne$on(b,e,f,d){var a=this;a[b]=a[b]||{tracking:0};var c=a[b];c.tracking++;c.tracking===1&&a.tryRun(e,f,d);return c.tracking},off:function Utilities$runOnce$off(c,d,e,b){var a=this[c];if(!a)return;--a.tracking;if(a.tracking!==0)return false;this.tryRun(d,e,b);return true},tryRun:function Utilities$runOne$tryRun(b,a,c){try{if(a)b.apply(a,c);else b()}catch(d){}}};$$WP.Utilities.declareComponent=function Utilities$declareComponent(a,e){var d=$$WP.Utilities.guaranteeExistence(e,a),b=a.split("."),c=b[b.length-1];d[c]=function(b){var a=this;a.Settings=b||{};a.Settings.Events=a.Settings.Events||[];a.Settings.Class=a.Settings.Class||"";a._Init(a.Settings)}};$$WP.Utilities.preventEvent=function Utilities$preventEvent(a){a.stopPropagation();a.preventDefault();return false};$$WP.Utilities.queryString=function Utilities$queryString(f){if(!$$WP.Utilities.queryString.parsed){for(var b=window.location.search.substr(1).split("&"),e={},c,d,a=0;a<b.length;a++){c=b[a].indexOf("=");if(c===-1&&a>0)e[d]+="&"+b[a];else{d=b[a].substr(0,c).toLowerCase();e[d]=b[a].substr(c+1)}}$$WP.Utilities.queryString.parsed=e}return $$WP.Utilities.queryString.parsed[f]||""};$$WP.Utilities.preventAndroidLongPress=function(b,a){if(navigator.userAgent.indexOf("Android")>=0){if(b.length==1&&!a)a=b;if(a)a.on("contextmenu",b.selector,function(a){a.preventDefault()})}};$$WP.Utilities.isBrowserCapableOf=function(c,b){var a;switch(c){case"input":a=document.createElement("input");a.setAttribute("type",b.type);return a.type==b.type;break;case"touchEvents":return"ontouchstart"in window||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>0}};$$WP.Utilities.popupMessage=function $$WP$Utilities$popupMessage(d,b,c,a){a=a||[{Text:$$WP.Strings.get("MessageBoxOK","Global")}];b=b||document.title;c=c||"smallbox";var e=new $$WP.Containers.Popup({Class:c,Buttons:a,Title:{Text:b},Content:{Text:d},_click:function(){this.dispose()}});e.show()};$$WP.Utilities.addUrlParameter=function(a,c,b){if(a.indexOf("?")===-1)a+="?";else if(a[a.length-1]!=="&")a+="&";return a+c+"="+b};$$WP.Utilities.canWriteCookies=function(){var a="testCookie";setCookie(a,"testValue",true);var c=getCookie(a,true),b=c!=="";b&&deleteCookie(a,true);return b};$$WP.Utilities.isValidBrowser=function(){return true} 