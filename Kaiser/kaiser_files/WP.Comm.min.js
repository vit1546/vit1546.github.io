/* Copyright Â© 2016 Epic Systems Corporation. */

/*! Copyright (c) Epic Systems Corporation 2011 */
if(typeof WP==="undefined")WP={};if(typeof WP.Comm==="undefined")WP.Comm={};WP.Comm.RESPONSETYPE_COMPLETE=2;WP.Comm.RESPONSETYPE_CONTENTONLY=1;WP.Comm.AJAXHandler=function(){var a=false,c=null,b=this;b.RESPONSETYPE_COMPLETE=WP.Comm.RESPONSETYPE_COMPLETE;b.RESPONSETYPE_CONTENTONLY=WP.Comm.RESPONSETYPE_CONTENTONLY;b.AH_reqObj=c;b.AH_URL=c;b.AH_extHandler=c;b.AH_postMethod=c;b.AH_reqParams=c;b.AH_respType=c;b.init=function(f,e,g,h,i,j){var b=this;i=i||WP.Comm.RESPONSETYPE_CONTENTONLY;h=h||"1";g=g||"GET";e=e||function(){};if(!f)return a;f+=f.indexOf("?")===-1?"?":"&";f+="noCache="+Math.random();g=g.toUpperCase();b.AH_reqObj=b.createXMLHttpRequest();if(b.AH_reqObj){b.AH_URL=f;b.AH_extHandler=e;b.AH_postMethod=g;b.AH_reqParams=h;b.AH_respType=i;var d=b.AH_reqObj;if(d.readyState===4||d.readyState===0){if(b.AH_postMethod==="GET"&&b.AH_reqParams.length>0)if(b.AH_URL.indexOf("?")>0)b.AH_URL=b.AH_URL+"&"+b.AH_reqParams;else b.AH_URL=b.AH_URL+"?"+b.AH_reqParams;d.open(b.AH_postMethod,b.AH_URL,true);switch(b.AH_respType){case WP.Comm.RESPONSETYPE_CONTENTONLY:d.onreadystatechange=function(){if(d.readyState===4){try{if(j!==true&&d.responseText.indexOf('http-equiv="refresh"')>0){window.location.href=f;return}}catch(k){return a}var c="<!-- Begin Site Wrapper -->",g="<!-- End Site Wrapper -->",h=new RegExp(c+"[\\s\\S]*"+g),b;try{b=d.responseText.match(h)}catch(i){return a}if(b){b=b[0];b=b.substring(c.length,b.length-g.length);e(b)}else e(d.responseText)}};break;default:d.onreadystatechange=function(){d.readyState===4&&e(d.responseText)}}if(b.AH_postMethod==="POST"&&b.AH_reqParams.length>0){d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.setRequestHeader("Content-Length",b.AH_reqParams.length);try{d.send(b.AH_reqParams)}catch(l){}}else try{d.send(c)}catch(k){}}}else return a};b.createXMLHttpRequest=function(){var b;if(window.XMLHttpRequest)b=new XMLHttpRequest;else try{b=new ActiveXObject("Msxml2.XMLHTTP")}catch(d){try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){b=a}}return b}};var AJAXHandler=WP.Comm.AJAXHandler;WP.Comm.ajaxRequest=function(f,a,b,c,d){var e=new WP.Comm.AJAXHandler;e.init(f,a,b,c,d)};WP.Comm.logOut=function(e,f,g,i){var a=null,d="function",c=true;f=f===c;i=i===c;g=g||"bye.asp";var j,h,k=makeLink("Home/LogOut?doRedirect="+(f?"true":"false")+"&logoutPage="+(g||"")),l,b;i&&typeof WP.Events.cancelBeforeUnload===d&&WP.Events.cancelBeforeUnload();typeof closeAllWindows===d&&closeAllWindows();if(f){window.location=k;typeof e===d&&e()}else{j=new AJAXHandler;WP.Comm.logOut.count=0;h=typeof e!==d?a:function WP$Comm$logOut$internalAfterExecute(a){var d=a.indexOf('http-equiv="refresh"'),c;if(d>-1){c=a.indexOf("url=",d)+4;b=a.substring(c,a.indexOf('"',c));if(b.substr(0,1)===".")b=b.substr(2);b=HTMLUnencode(b)}if(++WP.Comm.logOut.count===2){delete WP.Comm.logOut.count;e(b||"")}};j.init(k,h,a,a,a,c);j.init(makeLink(g),h,a,a,a,c)}return false};WP.Comm.logOut.numExecutions=0;WP.CH5=String.fromCharCode(5);WP.Comm.startDigiD=function(b,a){clearElement(a);var c=new WP.Comm.AJAXHandler;c.init("digidprelogin.asp?startlogin=1",function(c){var g=WP.CH5,d,f,e;d=c.indexOf(g);e=c.substr(0,d);if(e.length>0){window.location=e;return}if(b)b.disabled=false;f=c.substr(d+1,c.indexOf(g,d+1)-1);a.innerHTML="";createAlert(f||"The MyChart webserver could not be reached",true,a)},"GET","1",999);if(b)b.disabled=true;a.className="";a.innerHTML="";a.appendChild(createElement("span"));$T(a.firstChild,"Please wait while we contact DigiD");a.firstChild.className="alert"};WP.Comm.keepAlive=function(){var b=new WP.Comm.AJAXHandler,c=0,a=function(){++c===2&&window.setTimeout(WP.Comm.keepAlive,6e4)};++WP.Comm.keepAlive.counter;typeof intKeepalive==="function"&&intKeepalive();b.init(makeLink("keepalive.asp?cnt="+WP.Comm.keepAlive.counter),a,"GET","1",999);b.init(makeLink("Home/KeepAlive?cnt="+WP.Comm.keepAlive.counter),a,"GET","1",999)};WP.Comm.keepAlive.counter=0