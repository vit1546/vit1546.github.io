/* Copyright Copyright 2014 Epic Systems Corporation. */

/*! Copyright (c) Epic Systems Corporation 2014 */
$$WP.Utilities.guaranteeExistence($$WP,"Components");$$WP.Components.TemplateComponent=function $$WP$Components$TemplateComponent(a){this._Init(a)};$$WP.Components.TemplateComponent.prototype={Template:function(){},Data:{},canSet:function $$WP$Components$TemplateComponent$canSet(a){return!!a},LoadSettings:{Url:makeLink(""),Message:""},load:$$WP.Behaviors.Server.makeRequest,loadParameterizer:function(a){if(!a){if(this.Server.load.lastRequest)return this.Server.load.lastRequest.parameters;return}return!isNaN(a)?"id="+a:"id="+a.Id},LoadSettings:{Url:makeLink(""),Message:""},deleteData:$$WP.Behaviors.Server.makeRequest,afterDelete:function(){},deleteParameterizer:function(a){return!isNaN(a)?"id="+a:"id="+a.Id},listManager:$$WP.Components.TemplateComponent.prototype,_Init:function $$WP$Components$TemplateComponent$_Init(b){var a=this,c,d;b.Events.push("change");a.Components$Component(b);d=$$WP.Utilities.mergeObjects(a.Data,b.Data||{componentNumber:a._componentNumber},true,false);a.canSet=b.canSet||a.canSet;if(a.canSet(d))a.set(d);else a._data={componentNumber:a._componentNumber};a.LoadSettings=$$WP.Utilities.mergeObjects(a.LoadSettings,b.LoadSettings,true,false);a.loadParameterizer=b.loadParameterizer||a.loadParameterizer;if(a.LoadSettings.Url!==makeLink("")){$$WP.Behaviors.Server.addRequest(a,"load",a.LoadSettings.Url,{success:a.set,dataType:"json"},a.LoadSettings.Message);c=b.LoadParameters;if(c){a.load(c);delete b.LoadParameters}}a.LoadSettings=$$WP.Utilities.mergeObjects(a.LoadSettings,b.LoadSettings,true,false);a.deleteParameterizer=b.deleteParameterizer||a.deleteParameterizer;a.LoadSettings.Url!==makeLink("")&&$$WP.Behaviors.Server.addRequest(a,"deleteData",a.LoadSettings.Url,{success:a.afterDelete},a.LoadSettings.Message);delete b.canSet},"set":function $$WP$Components$TemplateComponent$set(b,d,c){var a=this;b=b||{};b.componentNumber=a._componentNumber;a._data=b;if(!d&&!a.canSet(b)){typeof a.load==="function"&&a.load(b,c);return false}return a.refresh()},refresh:function $$WP$Components$TemplateComponent$remove(){var a=this,b=$.isArray(a._data)?{dataElement:a._data}:a._data;if(!a.html(a.Template(b)))throw"Failed to refresh component.\n"+a._url+"\n"+b;return true},dispose:function $$WP$Components$TemplateComponent$dispose(a){this.$container.off("change","input textarea select",this._onInputChange);this.Components$Component$dispose(a)},_change:function $$WP$Components$TemplateComponent$_onInputChange(a){$$WP.Utilities.getSetSafe(this._data,a.target.name,a.target.value)}};$$WP.Components.TemplateComponent.extend("Components.Component")