/* Copyright Â© 2016 Epic Systems Corporation. */

/*! Copyright (c) Epic Systems Corporation 2014-2015

*mborofsk 7/13 266376 - update refresh function
*kagr    11/15 I8134027 - handle null for refresh function
*/
$$WP.Utilities.declareComponent("Components.ViewComponent");$$WP.Components.ViewComponent.prototype={LoadSettings:{Url:makeLink(""),Message:""},load:$$WP.Behaviors.Server.makeRequest,_Init:function $$WP$Components$ViewComponent$_Init(b){var a=this;a.Components$Component(b);a.LoadSettings=b.LoadSettings||a.LoadSettings;if(a.LoadSettings!==null&&a.LoadSettings.Url!==makeLink(""))$$WP.Behaviors.Server.addRequest(a,"load",a.LoadSettings.Url,{success:a.html,type:"GET"},a.LoadSettings.Message);else throw"ViewComponent descendent must declare LoadSettings { Url : makeLink(...) } in the prototype or before calling parent _Init";a.LoadParameters&&a.load(a.LoadParameters,null,a.LoadSettings.Message||$$WP.Components.ViewComponent.prototype.LoadSettings.Message,!!b.showComponentAfterLoad)},refresh:function(b){var a=this;if(a.Server.load.waitingForResponse)return;b=b===true;var c,d=a.Server.load.lastRequest||{};for(c in a.Server)if(a.Server[c]&&a.Server[c].lastRequest)delete a.Server[c].lastRequest;b===true&&a.hide();a.load(d.parameters,d.ajaxObjectOverrides,null,b===true)}};$$WP.Components.ViewComponent.extend("Components.Component")