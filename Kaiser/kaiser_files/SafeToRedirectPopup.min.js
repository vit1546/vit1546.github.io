/* Copyright Copyright 2014 Epic Systems Corporation. */

$$WP.Utilities.declareComponent("Popups.SafeToRedirectPopup");$$WP.Popups.SafeToRedirectPopup.prototype={Buttons:[{Text:$$WP.Strings.get("StayButtonText","Global.SafeToRedirectPopup")},{Text:$$WP.Strings.get("LeaveButtonText","Global.SafeToRedirectPopup"),Class:"inlinedelete"}],Title:{Text:$$WP.Strings.get("Title","Global.SafeToRedirectPopup")},Content:{Text:$$WP.Strings.get("Message","Global.SafeToRedirectPopup")},PositioningFunction:$$WP.Containers.Positions.InsideCentered,HasOverlay:true,_Init:function $$WP$Popups$SafeToRedirectPopup$_Init(b){var a=this;if(typeof b.callback!=="function")throw"A callback function is required for SafetoRedirectPopup";if(!WP.Events.showBeforeUnloadMessage()){WP.Events.beforeUnloadHold=true;b.callback.apply(b.CallbackContext,[true]);return}a.Containers$Popup(b);a.CallbackContext=b.CallbackContext||a;a.callback=b.callback||a.buttonClick;$$WP.Behaviors.EventHandlers.on("click",a);a.show();a.focus()},buttonClick:function $WP$Popups$SafeToRedirectPopup$onClick(b){var a=this;if(b<1){delete WP.Events.beforeUnloadHold;a.callback.apply(a.CallbackContext,[false])}else{WP.Events.beforeUnloadHold=true;a.callback.apply(a.CallbackContext,[true])}a.dispose()},dispose:function(){$$WP.Behaviors.EventHandlers.off("click",this);this.Containers$Popup$dispose()},_click:function(c,a){a=parseInt(a.substr(9),10);WP.Events.beforeUnloadHold=a===1;this.callback.apply(this.CallbackContext,[WP.Events.beforeUnloadHold]);this.dispose()}};$$WP.Popups.SafeToRedirectPopup.canceledRedirect=function $WP$Popups$SafeToRedirectPopup$canceledRedirect(){delete WP.Events.beforeUnloadHold};$$WP.Popups.SafeToRedirectPopup.extend("Containers.Popup")