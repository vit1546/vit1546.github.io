<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width">
<meta name="robots" content="noindex">
<title>Browser Extension Test | Grammarly</title>
<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/kbfnbcaeplbcioakkpcpgfkobkghlhen">
<link rel="stylesheet" media="all" href="extension_test.css">
</head>
<body>
	<div id="container">
		<div class="help-test-page">
			<div>
				<a class="common__logo" type="normal"></a>
			</div>
			<span class="title">Browser Extension Test</span>
			<div class="tests">
				<p>Type a senetence in the text box below.</p>
				<div id="test-div-wrapper">
					<div id="test-div" contenteditable="true"></div>
				</div>
				<p>Make sure there is a Grammarly icon in the bottom right corner and that misspelled words are underlined, as in the image below.</p>
				<img src="test-result.png"/>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		function testExtension(){
			var textDiv = document.getElementById("test-div");
			var grammarlyBtns = document.getElementsByTagName("grammarly-btn");
			var htmlClass = document.getElementsByTagName("html")[0].className;
			var htmlClassToCompare = "gr__" + window.location.hostname.replace(/\./g,"_");

			if(htmlClass.indexOf(htmlClassToCompare) > -1
				&& grammarlyBtns.length > 0
				&& grammarlyBtns.childNodes[0].className.indexOf("-offline") == -1
				&& textDiv.getAttribute("data-gramm") != "undefined"){

				console.log("works okay");

			}else if(htmlClass.indexOf(htmlClassToCompare) > -1
				&& grammarlyBtns.length > 0
				&& grammarlyBtns.childNodes[0].className.indexOf("-offline") > -1
				&& textDiv.getAttribute("data-gramm") != "undefined"){

				console.log("offline");

			}else{
				console.log("disable or not installed");
			}
		}
		window.onload = function() {
		    document.getElementById("test-div").focus();
		};
		setTimeout(testExtension, 2000);
	</script>
</body>
</html>